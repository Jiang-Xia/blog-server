import{r as g,u as ne,_ as se}from"../entrys/index-cbfe43de.js";/* empty css              *//* empty css               */import{u as ue}from"./loading-4e963a8c.js";/* empty css              *//* empty css               *//* empty css                *//* empty css              *//* empty css                *//* empty css               *//* empty css               *//* empty css               */import{d as H,e as b,c as ie,r as L,C as T,aE as R,aH as a,aI as e,u as j,aN as k,G as de,aS as P,b6 as q,b7 as G,aW as ce,aY as W,bd as X,aT as Y,D as me,aF as pe,h as re,bP as _e,bi as fe,aL as h,bc as he,bj as be,bm as ve,aX as Ve,bn as ge,bg as Fe,aO as N}from"./arco-ec7c5947.js";import"./chart-b82b394e.js";import"./vue-0b4461d7.js";const Ce=k("\u63D0\u4EA4"),ye=k("\u91CD\u7F6E"),ke=de("div",null,null,-1),we={name:"AddMenu"},O=H({...we,emits:["success"],setup(J,{expose:w,emit:x}){const r=b("add"),E=ie(()=>r.value==="edit"?"\u7F16\u8F91\u83DC\u5355":"\u65B0\u589E\u83DC\u5355"),F={id:"",pid:"",path:"",name:"",order:1,icon:"",locale:"",filePath:""},_=b(),m=b(!1),D=b(""),n=L({...F}),v={},U=async o=>{const t={...o};r.value==="edit"?(t.editId=D.value,await g.patch("admin/menu",t),m.value=!1,P.success("\u4FEE\u6539\u6210\u529F\uFF01"),V()):(await g.post("admin/menu",t),m.value=!1,P.success("\u65B0\u5EFA\u6210\u529F\uFF01"),V()),x("success")},S=o=>{console.log(o)},V=()=>{_.value.resetFields()},$=async()=>{const o=await g.get("admin/menu/detail",{params:{id:D.value}});Object.keys(F).forEach(c=>{n[c]=o.data[c]})},C=o=>{r.value=o.type,console.log({type:r.value}),r.value==="edit"?(D.value=o.id,$()):V(),m.value=!0},B=()=>{m.value=!1},u=()=>{m.value=!1};return w({show:C,visible:m}),(o,t)=>{const c=q,i=G,I=ce,f=W,z=X,y=Y;return T(),R(y,{visible:m.value,"onUpdate:visible":t[8]||(t[8]=s=>m.value=s),"mask-closable":!1,title:j(E),onOk:B,onCancel:u},{footer:a(()=>[ke]),default:a(()=>[e(z,{ref_key:"formRef",ref:_,name:"custom-validation",model:n,rules:v,"label-col-props":{span:3,offset:0},"wrapper-col-props":{span:20,offset:0},"hide-cancel":"",autocomplete:"off",onSubmitSuccess:U,onSubmitFailed:S},{default:a(()=>[e(i,{label:"id",name:"id",field:"id"},{default:a(()=>[e(c,{modelValue:n.id,"onUpdate:modelValue":t[0]||(t[0]=s=>n.id=s),disabled:r.value==="edit",placeholder:"id"},null,8,["modelValue","disabled"])]),_:1}),e(i,{label:"pid",name:"pid",field:"pid"},{default:a(()=>[e(c,{modelValue:n.pid,"onUpdate:modelValue":t[1]||(t[1]=s=>n.pid=s),placeholder:"pid"},null,8,["modelValue"])]),_:1}),e(i,{label:"path",name:"path",field:"path"},{default:a(()=>[e(c,{modelValue:n.path,"onUpdate:modelValue":t[2]||(t[2]=s=>n.path=s),placeholder:"path"},null,8,["modelValue"])]),_:1}),e(i,{label:"name",name:"name",field:"name"},{default:a(()=>[e(c,{modelValue:n.name,"onUpdate:modelValue":t[3]||(t[3]=s=>n.name=s),placeholder:"name"},null,8,["modelValue"])]),_:1}),e(i,{label:"icon",name:"icon",field:"icon"},{default:a(()=>[e(c,{modelValue:n.icon,"onUpdate:modelValue":t[4]||(t[4]=s=>n.icon=s),placeholder:"icon"},null,8,["modelValue"])]),_:1}),e(i,{label:"locale",name:"locale",field:"locale"},{default:a(()=>[e(c,{modelValue:n.locale,"onUpdate:modelValue":t[5]||(t[5]=s=>n.locale=s),placeholder:"locale"},null,8,["modelValue"])]),_:1}),e(i,{label:"filePath",name:"filePath",field:"filePath"},{default:a(()=>[e(c,{modelValue:n.filePath,"onUpdate:modelValue":t[6]||(t[6]=s=>n.filePath=s),placeholder:"filePath"},null,8,["modelValue"])]),_:1}),e(i,{label:"order",name:"order",field:"order"},{default:a(()=>[e(I,{modelValue:n.order,"onUpdate:modelValue":t[7]||(t[7]=s=>n.order=s),placeholder:"order"},null,8,["modelValue"])]),_:1}),e(i,{"wrapper-col-props":{span:13,offset:7}},{default:a(()=>[e(f,{type:"primary","html-type":"submit"},{default:a(()=>[Ce]),_:1}),e(f,{style:{"margin-left":"10px"},onClick:V},{default:a(()=>[ye]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["visible","title"])}}}),xe={class:"container"},Ee=k(" "+N("\u641C\u7D22")),De=k(" "+N("\u91CD\u7F6E")),Ue=k(" "+N("\u65B0\u5EFA")),Be={name:"UserManageTable"},Pe=H({...Be,setup(J){const w=(u,o)=>re(_e(`<${u.icon}/>`),o.attrs,o.slots);w.props=["icon"];const x=()=>({page:1,pageSize:10,total:0,content:""}),{loading:r,setLoading:E}=ue(!0);ne();const F=b([{}]),_=b(x()),m=b(O),n=L({...{current:1,pageSize:10}}),v=async(u=1)=>{E(!0),_.value.page=u,n.current=u;const o=await g.get("/admin/menu",{params:{role:"super"}}).then(t=>t.data);F.value=o,E(!1)},U=()=>{n.current=1,v()},S=u=>{v(u)};v();const V=()=>{_.value=x()},$=async u=>{Y.confirm({title:"\u5220\u9664\u7528\u6237",content:"\u786E\u5B9A\u5220\u9664\u8BE5\u7528\u6237\u561B\uFF1F",onOk:async()=>{await g.delete("/admin/menu",{params:{id:u}}),P.success("\u5220\u9664\u6210\u529F"),v()}})},C=async(u,o)=>{const{id:t}=o;await g.patch("/admin/menu",{[u]:o[u],id:t}),P.success("\u8BBE\u7F6E\u6210\u529F")},B=(u,o)=>{m.value.show({type:u,id:o})};return(u,o)=>{const t=q,c=G,i=fe,I=h("icon-search"),f=W,z=h("icon-refresh"),y=he,s=be,K=X,Q=h("icon-plus"),p=ve,M=Ve,Z=h("icon-check"),ee=h("icon-lock"),ae=h("icon-edit"),te=h("icon-delete"),le=ge,oe=Fe;return T(),me("div",xe,[e(oe,{class:"general-card",title:"\u83DC\u5355\u67E5\u8BE2"},{default:a(()=>[e(s,null,{default:a(()=>[e(i,{flex:1},{default:a(()=>[e(K,{model:_.value,"label-col-props":{span:6},"wrapper-col-props":{span:18},"label-align":"left"},{default:a(()=>[e(s,{gutter:16},{default:a(()=>[e(i,{span:10},{default:a(()=>[e(c,{label:"\u8DEF\u7531name"},{default:a(()=>[e(t,{modelValue:_.value.content,"onUpdate:modelValue":o[0]||(o[0]=l=>_.value.content=l),placeholder:"\u8BF7\u8F93\u5165\u8DEF\u7531name",disabled:""},null,8,["modelValue"])]),_:1})]),_:1}),e(i,{span:5,style:{"text-align":"right"}},{default:a(()=>[e(y,{size:8},{default:a(()=>[e(f,{type:"primary",onClick:U},{icon:a(()=>[e(I)]),default:a(()=>[Ee]),_:1}),e(f,{onClick:V},{icon:a(()=>[e(z)]),default:a(()=>[De]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),_:1}),e(s,{style:{"margin-bottom":"16px"}},{default:a(()=>[e(i,{span:16},{default:a(()=>[e(y,null,{default:a(()=>[e(f,{type:"primary",onClick:o[1]||(o[1]=l=>B("add"))},{icon:a(()=>[e(Q)]),default:a(()=>[Ue]),_:1})]),_:1})]),_:1})]),_:1}),e(le,{loading:j(r),"row-key":"id",pagination:n,data:F.value,bordered:!1,onPageChange:S},{columns:a(()=>[e(p,{title:"id","data-index":"id"}),e(p,{title:"name","data-index":"name"}),e(p,{title:"path","data-index":"path"}),e(p,{title:"filePath","data-index":"filePath"}),e(p,{title:"icon","data-index":"meta"},{cell:a(({record:l})=>{var d,A;return[(d=l==null?void 0:l.meta)!=null&&d.icon?(T(),R(w,{key:0,icon:(A=l==null?void 0:l.meta)==null?void 0:A.icon},null,8,["icon"])):pe("",!0)]}),_:1}),e(p,{title:"admin","data-index":"admin"},{cell:a(({record:l})=>[e(M,{modelValue:l.admin,"onUpdate:modelValue":d=>l.admin=d,type:"line",size:"small","active-color":"red",onChange:d=>C("admin",l)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),e(p,{title:"author","data-index":"status"},{cell:a(({record:l})=>[e(M,{modelValue:l.author,"onUpdate:modelValue":d=>l.author=d,type:"round",size:"small","active-color":"red",onChange:d=>C("author",l)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),e(p,{title:"\u7981\u7528","data-index":"isDelete"},{cell:a(({record:l})=>[e(M,{modelValue:l.isDelete,"onUpdate:modelValue":d=>l.isDelete=d,"active-color":"red","checked-value":!0,"unchecked-value":!1,size:"small",onChange:d=>C("isDelete",l)},{"checked-icon":a(()=>[e(Z)]),"unchecked-icon":a(()=>[e(ee)]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),e(p,{title:"\u64CD\u4F5C","data-index":"operations"},{cell:a(({record:l})=>[e(y,{size:8},{default:a(()=>[e(f,{size:"mini",type:"primary",onClick:d=>B("edit",l.id)},{default:a(()=>[e(ae)]),_:2},1032,["onClick"]),e(f,{size:"mini",type:"primary",status:"danger",onClick:d=>$(l.id)},{default:a(()=>[e(te)]),_:2},1032,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["loading","pagination","data"])]),_:1}),e(O,{ref:l=>m.value=l,onSuccess:U},null,512)])}}});const We=se(Pe,[["__scopeId","data-v-23b565b6"]]);export{We as default};
