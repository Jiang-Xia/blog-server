import{a as Q,u as W,r as $,_ as Z}from"../entrys/index-cbfe43de.js";/* empty css              *//* empty css               */import{u as ee}from"./loading-4e963a8c.js";/* empty css              *//* empty css               *//* empty css                *//* empty css              *//* empty css                *//* empty css               *//* empty css               *//* empty css                *//* empty css               *//* empty css               *//* empty css               */import{d as te,e as U,r as oe,C as ae,D as ne,aI as e,aH as t,u as le,aN as b,aO as r,G as y,F as z,aT as ie,aS as v,b6 as se,b7 as ue,bi as ce,bj as de,bd as re,aL as d,aY as pe,bc as _e,bk as me,bb as ge,bl as fe,bm as he,b9 as be,aX as Fe,bn as Ce,bg as ye}from"./arco-ec7c5947.js";import{g as ve,d as Be}from"./article-d61dc826.js";import"./chart-b82b394e.js";import"./vue-0b4461d7.js";const we={class:"container"},Ee=b(" "+r("\u641C\u7D22")),ke=b(" "+r("\u91CD\u7F6E")),xe=b(" "+r("\u65B0\u5EFA")),Ve={name:"ArticleList"},Ae=te({...Ve,setup(De){const{role:L}=Q(),B=()=>({page:1,category:"",tags:[],pageSize:10,total:0,title:"",description:"",content:"",uid:1}),{loading:P,setLoading:w}=ee(!0);W();const E=U([{}]),s=U(B()),g=oe({...{current:1,pageSize:10}}),f=async(n=1)=>{w(!0);const a=L==="author";s.value.page=n,g.current=n;const u={onlyMy:a,...s.value},p=await ve(u);E.value=p.list.map(l=>{var _;return l.tag=l.tags.map(F=>F.label).join(),l.tagColor=(_=l.tags[0])==null?void 0:_.color,l}),g.total=p.pagination.total,w(!1)},h=()=>{g.current=1,f()},I=n=>{f(n)};f();const T=()=>{s.value=B()},M=async n=>{ie.confirm({title:"\u5220\u9664\u6587\u7AE0",content:"\u786E\u5B9A\u5220\u9664\u8BE5\u6587\u7AE0\u561B\uFF1F",onOk:async()=>{await Be({id:n}),v.success("\u5220\u9664\u6210\u529F"),f()}})},N=async n=>{const{isDelete:a,id:u}=n;await $.patch("/article/disabled",{isDelete:a,id:u}),v.success("\u8BBE\u7F6E\u6210\u529F")},j=async n=>{const{topping:a,id:u}=n;await $.patch("/article/topping",{topping:a,id:u}),v.success("\u8BBE\u7F6E\u6210\u529F")};return(n,a)=>{const u=se,p=ue,l=ce,_=de,F=re,H=d("icon-search"),m=pe,O=d("icon-refresh"),C=_e,q=me,G=d("icon-plus"),R=ge,k=fe,i=he,x=be,V=d("icon-check"),A=d("icon-close"),D=Fe,X=d("icon-edit"),Y=d("icon-delete"),J=Ce,K=ye;return ae(),ne("div",we,[e(K,{class:"general-card",title:"\u6587\u7AE0\u67E5\u8BE2"},{default:t(()=>[e(_,null,{default:t(()=>[e(l,{flex:1},{default:t(()=>[e(F,{model:s.value,"label-col-props":{span:6},"wrapper-col-props":{span:18},"label-align":"left"},{default:t(()=>[e(_,{gutter:16},{default:t(()=>[e(l,{span:8},{default:t(()=>[e(p,{label:"\u6807\u9898"},{default:t(()=>[e(u,{modelValue:s.value.title,"onUpdate:modelValue":a[0]||(a[0]=o=>s.value.title=o),placeholder:"\u8BF7\u8F93\u5165\u5173\u952E\u5B57",onPressEnter:a[1]||(a[1]=o=>h())},null,8,["modelValue"])]),_:1})]),_:1}),e(l,{span:8},{default:t(()=>[e(p,{label:"\u63CF\u8FF0"},{default:t(()=>[e(u,{modelValue:s.value.description,"onUpdate:modelValue":a[2]||(a[2]=o=>s.value.description=o),placeholder:"\u8BF7\u8F93\u5165\u63CF\u8FF0",onPressEnter:a[3]||(a[3]=o=>h())},null,8,["modelValue"])]),_:1})]),_:1}),e(l,{span:8},{default:t(()=>[e(p,{label:"\u5185\u5BB9"},{default:t(()=>[e(u,{modelValue:s.value.content,"onUpdate:modelValue":a[4]||(a[4]=o=>s.value.content=o),placeholder:"\u8BF7\u8F93\u5165\u6587\u7AE0\u5185\u5BB9",onPressEnter:a[5]||(a[5]=o=>h())},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(l,{span:5,style:{"text-align":"right"}},{default:t(()=>[e(C,{size:8},{default:t(()=>[e(m,{type:"primary",onClick:h},{icon:t(()=>[e(H)]),default:t(()=>[Ee]),_:1}),e(m,{onClick:T},{icon:t(()=>[e(O)]),default:t(()=>[ke]),_:1})]),_:1})]),_:1})]),_:1}),e(q,{style:{"margin-top":"0"}}),e(_,{style:{"margin-bottom":"16px"}},{default:t(()=>[e(l,{span:16},{default:t(()=>[e(C,null,{default:t(()=>[e(m,{type:"primary",onClick:a[6]||(a[6]=o=>n.$router.push("/article/edit?type=add"))},{icon:t(()=>[e(G)]),default:t(()=>[xe]),_:1})]),_:1})]),_:1})]),_:1}),e(J,{loading:le(P),"row-key":"id",pagination:g,data:E.value,bordered:!1,onPageChange:I},{columns:t(()=>[e(i,{title:"\u6807\u9898","data-index":"title",width:260,ellipsis:""},{cell:t(({record:o})=>[e(k,{title:""},{content:t(()=>[e(R,{href:"https://jiang-xia.top/detail/"+o.id,target:"_blank",icon:""},{default:t(()=>[b(r(o.title),1)]),_:2},1032,["href"])]),default:t(()=>[y("span",null,r(o.title),1)]),_:2},1024)]),_:1}),e(i,{title:"\u63CF\u8FF0","data-index":"description",width:140,ellipsis:"",tooltip:""}),e(i,{title:"\u5C01\u9762","data-index":"category",width:100},{cell:t(({record:o})=>[e(k,{title:""},{content:t(()=>[e(x,{width:"200",height:"200",src:o.cover},null,8,["src"])]),default:t(()=>[e(x,{width:"40",height:"40",src:o.cover},null,8,["src"])]),_:2},1024)]),_:1}),e(i,{title:"\u5206\u7C7B","data-index":"category",width:120},{cell:t(({record:o})=>{var c,S;return[y("span",{style:z({color:(c=o.category)==null?void 0:c.color})},r((S=o.category)==null?void 0:S.label),5)]}),_:1}),e(i,{title:"\u6807\u7B7E","data-index":"tag",width:120},{cell:t(({record:o})=>[y("span",{style:z({color:o.tagColor})},r(o.tag),5)]),_:1}),e(i,{title:"\u67E5\u770B","data-index":"views",width:80}),e(i,{title:"\u70B9\u8D5E","data-index":"likes",width:80}),e(i,{title:"\u8BC4\u8BBA","data-index":"commentCount",width:80}),e(i,{title:"\u66F4\u65B0\u65F6\u95F4","data-index":"uTime",width:200}),e(i,{title:"\u7F6E\u9876",width:60,fixed:"right"},{cell:t(({record:o})=>[e(D,{modelValue:o.topping,"onUpdate:modelValue":c=>o.topping=c,"active-color":"red",onChange:c=>j(o)},{"checked-icon":t(()=>[e(V)]),"unchecked-icon":t(()=>[e(A)]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),e(i,{title:"\u7981\u7528",width:60,fixed:"right"},{cell:t(({record:o})=>[e(D,{modelValue:o.isDelete,"onUpdate:modelValue":c=>o.isDelete=c,"active-color":"red",onChange:c=>N(o)},{"checked-icon":t(()=>[e(V)]),"unchecked-icon":t(()=>[e(A)]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),e(i,{title:"\u64CD\u4F5C","data-index":"operations",width:120,fixed:"right"},{cell:t(({record:o})=>[e(C,{size:8},{default:t(()=>[e(m,{size:"mini",type:"primary",onClick:()=>{n.$router.push(`/article/edit?type=edit&id=${o.id}`)}},{default:t(()=>[e(X)]),_:2},1032,["onClick"]),e(m,{size:"mini",type:"primary",status:"danger",onClick:c=>M(o.id)},{default:t(()=>[e(Y)]),_:2},1032,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["loading","pagination","data"])]),_:1})])}}});const Qe=Z(Ae,[["__scopeId","data-v-6fa1fbfc"]]);export{Qe as default};
