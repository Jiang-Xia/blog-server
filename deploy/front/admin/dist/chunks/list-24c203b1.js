import{_ as R,a as me,b as fe,r as h,s as ve}from"../entrys/index-cbfe43de.js";/* empty css               *//* empty css                *//* empty css              */import{u as he}from"./loading-4e963a8c.js";/* empty css                *//* empty css              *//* empty css               *//* empty css              *//* empty css               */import{d as q,e as l,u as y,C as s,D,aI as n,aH as e,aK as J,aJ as W,aF as k,aN as d,aL as $,bG as ye,bH as ge,by as Y,bz as Q,G as _,aE as c,aO as A,bI as be,b4 as Fe,b5 as we,aT as U,h as K,b6 as ke,aS as I,aY as Ee,aM as Se,aG as xe,bc as Ce,bJ as Be,be as Ie,bK as Ae,bL as De,bM as $e,b9 as ze,bN as Le,bO as Me,bs as Ve}from"./arco-ec7c5947.js";import{i as Ne,u as Ue}from"./vue-0b4461d7.js";import{x as w}from"./index-7aa6117b.js";import"./chart-b82b394e.js";const je=""+new URL("../assets/animation_200_l7ykdvii-97ee4314.gif",import.meta.url).href,Oe=[{name:"\u5168\u90E8",value:0,type:"",icon:"icon-wenjianjia"},{name:"\u56FE\u7247",value:1,type:"image",icon:"icon-tupian"},{name:"\u6587\u6863",value:2,type:"text",icon:"icon-wenzhang1"},{name:"\u89C6\u9891",value:3,type:"video",icon:"icon-shipin"},{name:"\u97F3\u9891",value:4,type:"audio",icon:"icon-yinpin"},{name:"\u5176\u4ED6",value:5,type:"application",icon:"icon-baocun"}],Pe=p=>(Y("data-v-a5a02195"),p=p(),Q(),p),He={key:0,class:"file-aside"},Te=Pe(()=>_("div",{class:"heading"},"\u6587\u4EF6\u7BA1\u7406",-1)),Ge=d("\u6587\u4EF6\u7C7B\u578B"),Ke=q({__name:"file-aside",emits:["menuSelect"],setup(p,{emit:z}){const{width:E}=Ne(),S=l("0"),L=x=>{z("menuSelect",x)};return(x,C)=>{const B=$("icon-apps"),g=$("x-icon"),r=be,i=ye,M=ge;return y(E)>715?(s(),D("div",He,[Te,n(M,{style:{width:"220px",height:"100%","border-radius":"2px"},"default-open-keys":["0"],"default-selected-keys":[S.value]},{default:e(()=>[n(i,{key:"0"},{icon:e(()=>[n(B)]),title:e(()=>[Ge]),default:e(()=>[(s(!0),D(J,null,W(y(Oe),v=>(s(),c(r,{key:v.value.toString(),onClick:j=>L(v)},{icon:e(()=>[n(g,{icon:v.icon},null,8,["icon"])]),default:e(()=>[_("span",null,A(v.name),1)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1},8,["default-selected-keys"])])):k("",!0)}}});const Re=R(Ke,[["__scopeId","data-v-a5a02195"]]),qe=p=>(Y("data-v-f2dff3d5"),p=p(),Q(),p),Je={id:"file-manage",class:"file-manage"},We={class:"file-main"},Ye={class:"header-tool"},Qe=d("\u4E0A\u4F20"),Xe=d("\u65B0\u5EFA\u6587\u4EF6\u5939"),Ze={class:"file-content"},eo={class:"image-item"},oo=qe(()=>_("img",{src:je,style:{width:"50px",height:"50px"}},null,-1)),no={class:"title overflow-hidden-container"},to=d(" \u590D\u5236\u94FE\u63A5 "),ao=d(" \u79FB\u52A8\u5230 "),so=d(" \u5220\u9664 "),io=d("\u7A7A\u7A7A\u5982\u4E5F"),uo=d(" \u4E0A\u4F20\u6587\u4EF6 "),lo={class:"upload-container"},co=q({__name:"list",setup(p){const{loading:z,setLoading:E}=he(),S=l([]),{token:L}=me(),x=l({Authorization:`Bearer ${L}`}),C=l([]),B=l(0),g=l(1),r=l({page:1,pageSize:20,originalname:"",type:""}),i=async o=>{E(!0),o?(r.value.page=o,g.value=o):(r.value.page=1,g.value=1);const t=await h.get("/resources/files",{params:{...r.value,pid:w.value.folderId||"0"}}),[m,F]=t.data;C.value=m.map(u=>(u.visible=!1,u.url=ve+u.url,u)),B.value=F,setTimeout(()=>{E(!1)},300)},M=async o=>{await h.delete("/resources/file",{params:{id:o}}),I.success("\u5220\u9664\u6210\u529F"),i()},v=l(""),j=async o=>{const t=await h.get("/resources/files",{params:{pageSize:r.value.pageSize}}),[m,F]=t.data;U.confirm({title:"\u65B0\u5EFA\u6587\u4EF6\u5939",content:()=>K(Ve,{onChange:u=>{v.value=u},placeholder:"\u8BF7\u9009\u62E9\u6587\u4EF6\u5939",options:m.filter(u=>u.isFolder).map(u=>({value:u.id,label:u.filename}))}),async onOk(){await h.patch("/resources/file",{id:o,pid:v.value}),I.success("\u79FB\u52A8\u5B8C\u6210"),i()}})};i();const X=o=>{i(o)},Z=o=>{r.value.type=o.type,i()},{copy:ee}=Ue(),oe=async(o,t)=>{console.log(o),o==="1"?(await ee(t.url),I.success("\u590D\u5236\u6210\u529F")):o==="2"||(o==="3"?M(t.id):o==="4"&&j(t.id))},ne=async o=>{const{id:t=""}=o.response.data[0];return await h.delete("/resources/file",{params:{id:t}})?Promise.resolve(!0):Promise.resolve(!1)},b=l(!1),O=()=>{b.value=!1,S.value=[],i()},P=l(""),te=()=>{U.confirm({title:"\u65B0\u5EFA\u6587\u4EF6\u5939",content:()=>K(ke,{onChange:o=>{P.value=o},placeholder:"\u8BF7\u8F93\u5165\u6587\u4EF6\u5939\u540D"}),async onOk(){await h.post("/resources/folder",{name:P.value}),I.success("\u65B0\u5EFA\u5B8C\u6210"),i()}})},V=l(""),ae=o=>{!o.isFolder||(V.value=o.filename,w.value.folderId=o.id,i())},H=()=>{V.value="",w.value.folderId="",i()};return H(),(o,t)=>{const m=Ee,F=Se,u=xe,T=Ce,se=$("icon-search"),ie=Be,ue=Ie,le=ze,f=$("x-icon"),N=Le,ce=Me,re=Ae,de=De,pe=$e,_e=U;return s(),D("div",Je,[n(Re,{onMenuSelect:Z}),_("div",We,[_("div",Ye,[n(T,null,{default:e(()=>[n(u,null,{default:e(()=>[n(F,null,{default:e(()=>[n(m,{type:"text",onClick:H},{default:e(()=>[d(A(y(w).folderId?"\u8FD4\u56DE\u6839\u76EE\u5F55":"\u5168\u90E8\u6587\u4EF6"),1)]),_:1})]),_:1}),n(F,null,{default:e(()=>[d(A(V.value),1)]),_:1})]),_:1})]),_:1}),n(T,null,{default:e(()=>[n(m,{type:"primary",onClick:t[0]||(t[0]=a=>b.value=!b.value)},{default:e(()=>[Qe]),_:1}),n(ie,{modelValue:r.value.originalname,"onUpdate:modelValue":t[1]||(t[1]=a=>r.value.originalname=a),style:{width:"320px",marginLeft:"40px"},placeholder:"\u8F93\u5165\u6587\u4EF6\u540D\u641C\u7D22","search-button":"","allow-clear":"",onSearch:t[2]||(t[2]=a=>i()),onPressEnter:t[3]||(t[3]=a=>i()),onClear:t[4]||(t[4]=a=>i())},{"button-icon":e(()=>[n(se)]),_:1},8,["modelValue"]),n(m,{type:"primary",onClick:te},{default:e(()=>[Xe]),_:1})]),_:1})]),_("section",Ze,[Fe(n(ue,null,null,512),[[we,y(z)]]),(s(!0),D(J,null,W(C.value,a=>(s(),c(ce,{key:a.filename,trigger:"contextMenu","align-point":"",onSelect:G=>{oe(G,a)},onClick:G=>ae(a)},{content:e(()=>[a.isFolder?k("",!0):(s(),c(N,{key:0,value:"1"},{icon:e(()=>[n(f,{icon:"icon-lianjie1"})]),default:e(()=>[to]),_:1})),a.isFolder?k("",!0):(s(),c(N,{key:1,value:"4"},{icon:e(()=>[n(f,{icon:"icon-yidongwenjian"})]),default:e(()=>[ao]),_:1})),n(N,{value:"3"},{icon:e(()=>[n(f,{icon:"icon-qingchu"})]),default:e(()=>[so]),_:1})]),default:e(()=>[_("div",eo,[a.type.includes("image")?(s(),c(le,{key:0,src:a.url,description:"",width:"60",height:"60","footer-position":"outer","show-loader":""},{loader:e(()=>[oo]),_:2},1032,["src"])):a.type.includes("video")?(s(),c(f,{key:1,icon:"icon-shipin"})):a.type.includes("audio")?(s(),c(f,{key:2,icon:"icon-yinpin"})):a.type.includes("text")?(s(),c(f,{key:3,icon:"icon-wenzhang1"})):a.type.includes("application")?(s(),c(f,{key:4,icon:"icon-baocun"})):a.isFolder?(s(),c(f,{key:5,icon:"icon-wenjianjia"})):k("",!0),_("div",no,A(a.originalname),1)])]),_:2},1032,["onSelect","onClick"]))),128)),C.value.length?k("",!0):(s(),c(re,{key:0},{default:e(()=>[io]),_:1}))]),n(de,{total:B.value,current:g.value,"page-size":r.value.pageSize,"show-total":"",onChange:X},null,8,["total","current","page-size"])]),n(_e,{visible:b.value,"onUpdate:visible":t[5]||(t[5]=a=>b.value=a),"hide-cancel":"","ok-text":"\u5B8C\u6210","modal-class":"upload-modal",onOk:O,onCancel:O},{title:e(()=>[uo]),default:e(()=>[_("div",lo,[n(pe,{action:y(fe)+"/resources/uploadFile",name:"fileContents",data:{pid:y(w).folderId},multiple:"",limit:10,draggable:"",headers:x.value,"auto-upload":!0,"show-file-list":!0,"file-list":S.value,"image-preview":"",onBeforeRemove:ne},null,8,["action","data","headers","file-list"])])]),_:1},8,["visible"])])}}});const So=R(co,[["__scopeId","data-v-f2dff3d5"]]);export{So as default};
